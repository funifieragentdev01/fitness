# Sprint Planning ‚Äî 2026-02-28

## 1. Check-ins Di√°rios (Refei√ß√£o, Treino, Hidrata√ß√£o)

**Status:** üü° Em an√°lise | **Complexidade:** M√©dia

**Problema:**
Dados do dia anterior podem vazar para o dia seguinte no treino. An√°lise do c√≥digo:
- **√Ågua** (`water.js`): ‚úÖ J√° usa chave por dia (`fitness_water_YYYY-MM-DD` e `fitness_waterml_YYYY-MM-DD`). Dados isolados por dia.
- **Refei√ß√£o** (`meal.js` + `meal-plan.js`): ‚úÖ J√° usa chave por dia (`fitness_meals_YYYY-MM-DD`). Cada refei√ß√£o registrada com id `time_name`.
- **Treino** (`workout.js`): ‚ùå N√£o tem controle por dia. O `submitWorkout` apenas loga action `complete_workout` no Funifier, sem persist√™ncia local por data. N√£o h√° como saber no frontend se o treino do dia j√° foi feito.
- **Workout Plan** (`workout-plan.js`): Plano carregado de `localStorage('fitness_workoutplan')` ‚Äî √© o plano geral (sem registro di√°rio de conclus√£o).

**Solu√ß√£o proposta:**
1. Criar cole√ß√£o `checkin__c` no Funifier com campos: `player`, `date` (YYYY-MM-DD), `type` (water|meal|workout), `entries[]` (array com detalhes).
2. No frontend, ao registrar treino, salvar tamb√©m em `localStorage('fitness_workout_YYYY-MM-DD')` para feedback imediato.
3. Sync com backend: ao submeter, criar/atualizar registro na `checkin__c`.
4. Gamifica√ß√£o: action `complete_daily_checkin` disparada quando todos os check-ins previstos do tipo s√£o conclu√≠dos naquele dia.
5. Dashboard mostra status de cada tipo (‚úÖ/‚¨ú) para o dia atual.

---

## 2. Gateway de Pagamento

**Status:** üî¥ Planejar | **Complexidade:** Alta

**Problema:**
Precisa de gateway com Pix + cart√£o de cr√©dito para p√∫blico BR. Modelo: assinatura R$29,90/m√™s com trial de 7 dias.

**Solu√ß√£o proposta ‚Äî Recomenda√ß√£o: Asaas**
| Gateway | Pix BR | Cart√£o | Assinatura recorrente | Complexidade integra√ß√£o |
|---------|--------|--------|----------------------|------------------------|
| **Stripe** | ‚úÖ Sim (Pix dispon√≠vel no BR desde 2023) | ‚úÖ | ‚úÖ | M√©dia ‚Äî SDK robusto, docs em ingl√™s |
| **Mercado Pago** | ‚úÖ | ‚úÖ | ‚úÖ | M√©dia ‚Äî popular BR, SDK PHP/JS |
| **Asaas** | ‚úÖ | ‚úÖ | ‚úÖ | Baixa ‚Äî API simples, foco BR, boleto+pix+cart√£o |

**Recomenda√ß√£o:** **Asaas** como principal (foco BR, API simples, bom suporte, taxas competitivas). Stripe como alternativa se escalar internacionalmente.

**Fluxo:**
1. Signup ‚Üí cria customer no Asaas
2. Trial 7 dias (flag local + Funifier)
3. Dia 7: webhook Asaas cobra R$29,90 (Pix ou cart√£o conforme escolha)
4. Webhook de pagamento confirmado ‚Üí ativa assinatura no Funifier
5. Webhook de falha ‚Üí notifica usu√°rio, grace period 3 dias
6. Cancelamento: via app ou Asaas

---

## 3. Feedback Interativo (Vibra√ß√£o, Sons, Efeitos)

**Status:** üü¢ Pronto pra executar | **Complexidade:** Baixa

**Problema:**
App n√£o tem feedback sensorial. A√ß√µes importantes passam despercebidas.

**Solu√ß√£o proposta ‚Äî Momentos para feedback:**

| Momento | Haptic | Som | Anima√ß√£o |
|---------|--------|-----|----------|
| Registrar copo de √°gua | Vibra√ß√£o curta (50ms) | Som de "plop" | Splash animation no copo |
| Completar refei√ß√£o | Vibra√ß√£o curta (50ms) | Som de "ding" | Checkmark animado |
| Completar treino | Vibra√ß√£o dupla (100ms) | Som de "achievement" | Confetti burst |
| Ganhar XP | ‚Äî | Som sutil "coin" | XP floating number |
| Subir de n√≠vel | Vibra√ß√£o longa (200ms) | Som de "level up" | Full-screen celebration |
| Badge desbloqueado | Vibra√ß√£o dupla | Som "unlock" | Badge shine animation |
| Check-in do Desafio 90 | Vibra√ß√£o m√©dia | Som "camera" | Flash branco |

**Implementa√ß√£o:**
- `navigator.vibrate()` com fallback silencioso
- √Åudio via `new Audio('sounds/xxx.mp3')` ‚Äî arquivos <50KB cada
- CSS animations / Lottie para efeitos visuais
- Service `FeedbackService` centralizado com `feedback.play('water')`, `feedback.play('levelup')` etc.

---

## 4. Skill de Frontend Developer da Anthropic

**Status:** üü° Em an√°lise | **Complexidade:** Baixa

**Problema:**
Avaliar se existe uma "skill" ou modo especial do Claude para gerar melhores interfaces.

**An√°lise:**
A "Frontend Developer Skill" n√£o √© um produto oficial da Anthropic. O termo refere-se a **system prompts otimizados** usados em ferramentas como Cursor, Claude Code, ou projetos que configuram o Claude com instru√ß√µes especializadas para:
- Gerar HTML/CSS/JS de alta qualidade
- Seguir design systems espec√≠ficos
- Produzir componentes responsivos e acess√≠veis
- Usar frameworks modernos (React, Vue, etc.)

**Recomenda√ß√£o para nosso workflow:**
1. Criar um system prompt dedicado no nosso AGENTS.md/SOUL.md com: design tokens do FitEvolve, padr√µes CSS, componentes existentes, stack (AngularJS).
2. Alimentar o Claude com screenshots + c√≥digo existente antes de pedir novos componentes.
3. Usar artifacts do Claude para preview r√°pido de UI.
4. Manter um `STYLE_GUIDE.md` no repo com cores, tipografia, componentes padr√£o.

---

## 5. Espa√ßo no Hero da Landing Page (Mobile)

**Status:** üü¢ Pronto pra executar | **Complexidade:** Baixa

**Problema:**
Na vers√£o mobile (‚â§480px), o hero ocupava `min-height: 100vh` com v√≠deo/bg de `45vh`, criando espa√ßo excessivo entre o hero e a se√ß√£o "Como funciona".

**Solu√ß√£o aplicada (CORRIGIDO):**
- `min-height: 100vh` ‚Üí `min-height: auto` (hero dimensiona pelo conte√∫do)
- V√≠deo/bg: `45vh` ‚Üí `38vh` (menos espa√ßo para m√≠dia)
- Overlay gradiente ajustado para transi√ß√£o mais suave
- Content padding: `40px` ‚Üí `24px` bottom, margin-top: `-8vh` ‚Üí `-6vh`

---

## 6. Objetos 3D (Meshy.ai + Three.js)

**Status:** üî¥ Planejar | **Complexidade:** Alta

**Problema:**
Adicionar elementos 3D para enriquecer a experi√™ncia visual do app.

**Solu√ß√£o proposta:**

**Onde usar 3D:**
- **Tela de loading:** Flame 3D girando (logo Funifier)
- **Trof√©us/Badges:** Modelo 3D do trof√©u que gira ao ser conquistado
- **Level up:** Personagem 3D celebrando
- **Desafio 90 dias:** Trof√©u 3D final rotativo
- **Transi√ß√µes:** Elementos 3D sutis entre se√ß√µes

**Integra√ß√£o com AngularJS:**
1. Criar directive `<three-viewer model="trophy.glb" auto-rotate></three-viewer>`
2. Three.js carregado via `<script>` (CDN ou local)
3. GLTFLoader para carregar arquivos `.glb`
4. Canvas WebGL dentro da directive

**Fluxo de produ√ß√£o:**
1. Meshy.ai: descrever modelo (ex: "golden trophy with flame") ‚Üí gera 3D
2. Exportar como `.glb` (formato compacto)
3. Otimizar: glTF-Transform para reduzir tamanho (<500KB)
4. Three.js renderiza com OrbitControls + auto-rotate

---

## 7. Texto Redundante no Banner do Desafio 90 Dias

**Status:** üü¢ Pronto pra executar | **Complexidade:** Baixa

**Problema:**
O banner do Desafio 90 Dias exibia "üèÜ Desafio 90 Dias" tanto no header da tela quanto no `challenge90-banner-text` sobre a imagem de fundo, criando redund√¢ncia visual.

**Solu√ß√£o aplicada (CORRIGIDO):**
- Removido o conte√∫do textual do `div.challenge90-banner-text`, mantendo apenas a imagem de fundo do banner.
- O t√≠tulo j√° aparece no `screen-header` acima.

---

## 8. Planos Standard vs Premium

**Status:** üî¥ Planejar | **Complexidade:** M√©dia

**Problema:**
Definir diferencia√ß√£o entre planos para monetiza√ß√£o e reten√ß√£o.

**Solu√ß√£o proposta:**

| Feature | Standard (R$29,90/m√™s) | Premium (R$179,90/m√™s) |
|---------|----------------------|----------------------|
| Plano alimentar IA | ‚úÖ | ‚úÖ |
| Plano de treino IA | ‚úÖ | ‚úÖ |
| An√°lise foto prato | ‚úÖ | ‚úÖ |
| Gamifica√ß√£o | ‚úÖ | ‚úÖ |
| Desafio 90 dias | ‚úÖ | ‚úÖ |
| Altera√ß√£o de planos | 1x/m√™s | Ilimitado |
| Coach IA com voz | ‚ùå | ‚úÖ |
| Objetos 3D / trof√©us | B√°sicos | Premium exclusivos |
| Analytics avan√ßado | ‚ùå | ‚úÖ (gr√°ficos detalhados, exportar dados) |
| Prioridade suporte | ‚ùå | ‚úÖ |
| Badge exclusivo | ‚ùå | ‚úÖ "Premium Member" |

**Implementa√ß√£o:**
1. Campo `plan_type` no perfil do player (standard/premium)
2. Middleware no frontend: verificar `plan_type` antes de permitir a√ß√£o
3. Contador de altera√ß√µes: `plan_changes_YYYY-MM` no Funifier
4. UI: lock icon + upsell modal nas features premium

---

## 9. Social Media (Instagram)

**Status:** üî¥ Planejar | **Complexidade:** M√©dia

**Problema:**
N√£o h√° presen√ßa em redes sociais. Precisa iniciar estrat√©gia de aquisi√ß√£o org√¢nica.

**Solu√ß√£o proposta:**

**Conta sugerida:** `@coachfit.ai` ou `@coachfitai.br`

**Primeiro post ‚Äî imagem criativa:**
- Tema: "Seu personal trainer + nutricionista no bolso"
- Visual: Mockup do app no celular + elementos de comida saud√°vel + halteres
- Ferramenta: Freepik AI para gerar imagem base, editar no Canva

**Roteiro Reels (30-60s):**
1. **Hook (0-3s):** "E se voc√™ tivesse um personal trainer E nutricionista 24/7?" (texto na tela)
2. **Problema (3-8s):** Pessoa perdida na academia / comendo fast food
3. **Solu√ß√£o (8-20s):** Abre o app, mostra plano alimentar, mostra treino
4. **Prova (20-30s):** An√°lise de foto do prato, XP subindo, badge desbloqueado
5. **CTA (30s):** "Link na bio. 7 dias gr√°tis." (tela do app com QR)

**Estrat√©gia inicial:**
- 3 posts/semana (2 carrossel educativo + 1 Reels)
- Temas: nutri√ß√£o, treino, gamifica√ß√£o, transforma√ß√£o
- Hashtags: #fitness #nutricao #personaltrainer #ia #desafio90dias

---

## 10. Chat IA com Voz em Tempo Real

**Status:** üî¥ Planejar | **Complexidade:** Alta

**Problema:**
Criar experi√™ncia de coaching conversacional por voz, como um personal trainer real.

**Solu√ß√£o proposta ‚Äî Arquitetura:**

```
[Usu√°rio fala] ‚Üí [Browser SpeechRecognition / Whisper API]
                         ‚Üì
              [Texto] ‚Üí [Claude API com tools]
                         ‚Üì
              [Resposta texto] ‚Üí [OpenAI TTS / ElevenLabs]
                         ‚Üì
              [√Åudio stream] ‚Üí [Reproduz no browser]
```

**Componentes:**

| Componente | Op√ß√£o A (Leve) | Op√ß√£o B (Pro) |
|------------|----------------|---------------|
| STT | `webkitSpeechRecognition` (gr√°tis, browser) | Whisper API ($0.006/min) |
| LLM | Claude API com tools | Claude API com tools |
| TTS | OpenAI TTS ($15/1M chars) | ElevenLabs ($5/mo starter) |
| Streaming | WebSocket | WebRTC (menor lat√™ncia) |

**Barge-in (interrup√ß√£o):**
1. Detectar que usu√°rio come√ßou a falar (`onstart` do SpeechRecognition)
2. Pausar/cancelar √°udio TTS em andamento
3. Aguardar fim da fala do usu√°rio
4. Processar nova mensagem

**Tools do Coach (function calling):**
- `adjust_meal_plan(changes)` ‚Äî ajustar plano alimentar
- `adjust_workout_plan(changes)` ‚Äî ajustar treino
- `log_water(cups)` ‚Äî registrar √°gua
- `log_meal(type)` ‚Äî registrar refei√ß√£o
- `get_progress()` ‚Äî consultar progresso

**Contexto carregado por sess√£o:**
- Perfil do player (peso, altura, objetivo, restri√ß√µes)
- Plano alimentar e de treino atuais
- Check-ins do dia
- Hist√≥rico recente (√∫ltimos 7 dias)
- N√≠vel e XP atuais

**Recomenda√ß√£o:** Come√ßar com Op√ß√£o A (SpeechRecognition + OpenAI TTS) ‚Äî menor custo, mais r√°pido de implementar. Migrar para Op√ß√£o B conforme demanda.
