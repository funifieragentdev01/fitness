<div id="progress" class="screen has-nav">
    <div class="screen-header">
        <h2>ðŸ“Š EvoluÃ§Ã£o</h2>
    </div>
    <div class="screen-body">
        <!-- Current Level Card -->
        <div class="progress-section">
            <div class="level-current-card">
                <div class="level-current-info">
                    <span class="level-current-name">{{playerLevel.level || 'Iniciante'}}</span>
                    <span class="level-current-xp">{{playerPoints.xp || 0}} XP</span>
                </div>
                <div class="progress-bar" style="margin:12px 0 8px">
                    <div class="progress-fill" ng-style="{'width': levelProgress + '%'}"></div>
                </div>
                <div class="level-next-info" ng-show="nextLevel">
                    <span>PrÃ³ximo: <strong>{{nextLevel.level}}</strong></span>
                    <span>{{nextLevel.minPoints - playerPoints.xp}} XP restantes</span>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="progress-section">
            <h3 class="section-title">Resumo</h3>
            <div class="stat-row">
                <div class="stat-box">
                    <span class="stat-number">{{completedChallenges}}</span>
                    <span class="stat-label">Desafios</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">{{playerPoints.energy || 0}}</span>
                    <span class="stat-label">Energia âš¡</span>
                </div>
            </div>
        </div>

        <!-- Weight Chart -->
        <div class="progress-section" ng-show="weightHistory.length">
            <h3 class="section-title">Peso ao Longo do Tempo</h3>
            <div class="weight-chart-container">
                <canvas id="weightChart" style="width:100%;height:200px"></canvas>
            </div>
        </div>

        <!-- Photo Timeline -->
        <div class="progress-section">
            <h3 class="section-title">Timeline de Fotos</h3>
            <div class="photo-timeline" ng-show="photoTimeline.length">
                <div class="photo-timeline-item" ng-repeat="photo in photoTimeline">
                    <img ng-src="{{photo.url}}" class="photo-timeline-img">
                    <span class="photo-timeline-date">{{photo.date}}</span>
                </div>
            </div>
            <div ng-show="!photoTimeline.length" class="empty-state">
                <p>Nenhuma foto ainda. <a href="" ng-click="goTo('body-checkin')" style="color:var(--accent)">Fazer check-in</a></p>
            </div>
        </div>

        <!-- Weight History List -->
        <div class="progress-section" ng-show="weightHistory.length">
            <h3 class="section-title">HistÃ³rico de Peso</h3>
            <div class="weight-list">
                <div class="weight-entry" ng-repeat="w in weightHistory | limitTo:10">
                    <span class="weight-date">{{w.date}}</span>
                    <span class="weight-value">{{w.weight}} kg</span>
                </div>
            </div>
        </div>
    </div>
    <bottom-nav active="'progress'"></bottom-nav>
</div>
